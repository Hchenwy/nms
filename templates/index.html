
{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load bootstrap3 %}
{% block title %}
<title>网管系统_首页</title>
{% endblock %}
{% block custom_head_css %}
<script src="{% static "echarts/js/echarts.min.js" %}"></script>
{% endblock %}

{% block content %}
<div class="page-content">
    <div class="row">
        <div class="col-sm-6">
            <div class="widget-box transparent">
                <div class="widget-header widget-header-small ">
                    <h6 class="lighter">
                        <i class="icon-star orange"></i>
                        用户与资产
                    </h6>

                    <div class="widget-toolbar">
                        <a href="#" data-action="collapse">
                            <i class="icon-chevron-up"></i>
                        </a>
                        <a href="#" data-action="close">
                            <i class="icon-remove"></i>
                        </a>
                    </div>
                </div>

                <div class="widget-body">
                    <div class="widget-body-inner" style="display: block;">
                        <div class="widget-main no-padding">
                            <table class="table table-bordered table-striped">
                                <thead class="thin-border-bottom">
                                    <tr>
                                        <th>
                                            <i class="icon-caret-right blue"></i>
                                            属性
                                        </th>

                                        <th>
                                            <i class="icon-caret-right blue"></i>
                                            数值
                                        </th>

                                        <th class="hidden-480">
                                            <i class="icon-caret-right blue"></i>
                                            详细
                                        </th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td>用户数量</td>

                                        <td>
                                            <a href="{% url 'users:user-list' %}">{{ users_count }}</a>
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label label-info arrowed-right arrowed-in">on sale</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>用户组数量</td>

                                        <td>
                                            <small>
                                                <s class="red"></s>
                                            </small>
                                            <a href="{% url 'users:user-group-list' %}">{{ users_group_count }}</a>
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label label-success arrowed-in arrowed-in-right">approved</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>资产数量</td>

                                        <td>
                                            <small>
                                                <s class="red"></s>
                                            </small>
                                            <a href="{% url 'assets:asset-list' %}">{{ assets_count }}</a>
                                             
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label label-danger arrowed">pending</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>资产组数量</td>

                                        <td>
                                            <a href="{% url 'assets:asset-group-list' %}">{{ assets_group_count }}</a>
                                            <b class="green"></b>
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label arrowed">
                                                <s>out of stock</s>
                                            </span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>机房数量</td>

                                        <td>
                                            <small>
                                                <s class="red"></s>
                                            </small>
                                            <b class="green"> </b>
                                            <a href="{% url 'assets:IDC-list' %}">{{ IDC_count }}</a>
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label label-warning arrowed arrowed-right">SOLD</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- /widget-main -->
                    </div>
                </div>
                <!-- /widget-body -->
            </div>
            <!-- /widget-box -->
        </div>
        <div class="col-sm-6">
            <div class="widget-box transparent">
                <div class="widget-header  widget-header-small">
                    <h6 class="lighter">
                        <i class="icon-star orange"></i>
                        用户与资产
                    </h6>

                    <div class="widget-toolbar">
                        <a href="#" data-action="collapse">
                            <i class="icon-chevron-up"></i>
                        </a>
                        <a href="#" data-action="close">
                            <i class="icon-remove"></i>
                        </a>
                    </div>
                </div>

                <div class="widget-body">
                    <div class="widget-body-inner" style="display: block;">
                        <div class="widget-main no-padding">
                            <table class="table table-bordered table-striped">
                                <thead class="thin-border-bottom">
                                    <tr>
                                        <th>
                                            <i class="icon-caret-right blue"></i>
                                            属性
                                        </th>

                                        <th>
                                            <i class="icon-caret-right blue"></i>
                                            数值
                                        </th>

                                        <th class="hidden-480">
                                            <i class="icon-caret-right blue"></i>
                                            详细
                                        </th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td>用户数量</td>

                                        <td>
                                            <a href="{% url 'users:user-list' %}">{{ users_count }}</a>
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label label-info arrowed-right arrowed-in">on sale</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>用户组数量</td>

                                        <td>
                                            <small>
                                                <s class="red"></s>
                                            </small>
                                            <a href="{% url 'users:user-group-list' %}">{{ users_group_count }}</a>
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label label-success arrowed-in arrowed-in-right">approved</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>资产数量</td>

                                        <td>
                                            <small>
                                                <s class="red"></s>
                                            </small>
                                            <a href="{% url 'assets:asset-list' %}">{{ assets_count }}</a>
                                             
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label label-danger arrowed">pending</span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>资产组数量</td>

                                        <td>
                                            <a href="{% url 'assets:asset-group-list' %}">{{ assets_group_count }}</a>
                                            <b class="green"></b>
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label arrowed">
                                                <s>out of stock</s>
                                            </span>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>机房数量</td>

                                        <td>
                                            <small>
                                                <s class="red"></s>
                                            </small>
                                            <b class="green"> </b>
                                            <a href="{% url 'assets:IDC-list' %}">{{ IDC_count }}</a>
                                        </td>

                                        <td class="hidden-480">
                                            <span class="label label-warning arrowed arrowed-right">SOLD</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!-- /widget-main -->
                    </div>
                </div>
                <!-- /widget-body -->
            </div>
            <!-- /widget-box -->
        </div>

        <div class="col-sm-11">
            {{e_barmap|safe}}
        </div>
        
        <div class="col-sm-12">
            {{e_hmap|safe}}
        </div>

    </div><!-- /.row -->

                     <div id="container" style="height: 600px;"></div>

</div>
{% endblock %}
{% block custom_foot_js %} 
<script>

var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};
option = null;
myChart.showLoading();

$.get('static/json/treemap-drill-down.json', function (diskData) {
    myChart.hideLoading();

    function colorMappingChange(value) {
        var levelOption = getLevelOption(value);
        chart.setOption({
            series: [{
                levels: levelOption
            }]
        });
    }

    var formatUtil = echarts.format;

    function getLevelOption() {
        return [
            {
                itemStyle: {
                    normal: {
                        borderColor: '#777',
                        borderWidth: 0,
                        gapWidth: 1
                    }
                },
                upperLabel: {
                    normal: {
                        show: false
                    }
                }
            },
            {
                itemStyle: {
                    normal: {
                        borderColor: '#555',
                        borderWidth: 5,
                        gapWidth: 1
                    },
                    emphasis: {
                        borderColor: '#ddd'
                    }
                }
            },
            {
                colorSaturation: [0.35, 0.5],
                itemStyle: {
                    normal: {
                        borderWidth: 5,
                        gapWidth: 1,
                        borderColorSaturation: 0.6
                    }
                }
            }
        ];
    }

    myChart.setOption(option = {

          title: {
              text: '监控图',
              left: 'left'
          },

        tooltip: {
            formatter: function (info) {
                var value = info.value;
                var treePathInfo = info.treePathInfo;
                var treePath = [];

                for (var i = 1; i < treePathInfo.length; i++) {
                    treePath.push(treePathInfo[i].name);
                }

                return [
                    '<div class="tooltip-title">' + formatUtil.encodeHTML(treePath.join('/')) + '</div>',
                    'Disk Usage: ' + formatUtil.addCommas(value) + ' KB',
                ].join('');
            }
        },

        series: [
            {
                name:'Disk Usage',
                type:'treemap',
                visibleMin: 300,
                label: {
                    show: true,
                    formatter: '{b}'
                },
                upperLabel: {
                    normal: {
                        show: true,
                        height: 30
                    }
                },
                itemStyle: {
                    normal: {
                        borderColor: '#fff'
                    }
                },
                levels: getLevelOption(),
                data: diskData
            }
        ]
    });
});;
if (option && typeof option === "object") {
    myChart.setOption(option, true);
}
</script>
{% endblock %}

